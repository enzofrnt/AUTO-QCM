{% load static %}
<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      {% block title %}
        Auto QCM
      {% endblock %}
    </title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
    <link rel="icon" href="{% static 'img/logo.ico' %}" />
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
    <link rel="stylesheet" href="{% static 'css/home_page.css' %}" />
    <link rel="stylesheet" href="{% static 'css/question_list.css' %}" />
  </head>
  <body>
    <div class="" style="display: flex; width: 100%;">
      <div style="width: 300px;">
        <div style="height: 100%; position: fixed;">
          <div style="display: flex; align-items: center;">
          <nav class="sidebar">
            <ul class="nav-list">
              <!-- Dark Mode Switch Button -->
              <li>
                <label class="switch">
                  <input type="checkbox" id="theme-switch">
                  <span class="slider round"></span>
                  DarkMode
                </label>
              </li>
              
              <!-- Navigation Links -->
              <li><a class="nav-item" href="{% url 'home' %}"> <i class="bi bi-house-door"></i> Accueil</a></li>
              {% if user.utilisateur.user_type == 'Enseignant' %}
                  <li><a class="nav-item" href="{% url 'question-list' %}"> <i class="bi bi-card-checklist"></i> Liste des questions</a></li>
                  <li><a class="nav-item" href="{% url 'qcm-create' %}"><i class="bi bi-question-square"></i> Générer un QCM</a></li>
                  <li><a class="nav-item" href="{% url 'enseignant-dashboard' pk=user.id %}"><i class="bi bi-speedometer2"></i> Tableau de bord enseignant</a></li>
                  <li><a class="nav-item" href="{% url 'qcm-list' %}"><i class="bi bi-card-checklist"></i> Liste des qcm (temp)</a></li>
              {% endif %}

              {% if user.utilisateur.user_type == 'Etudiant' %}
                  <li><a class="nav-item" href="{% url 'etudiant-dashboard' pk=user.id %}"><i class="bi bi-speedometer2"></i> Tableau de bord étudiant</a></li>
              {% endif %}

              <li><a class="nav-item" href="{% url 'support-doc' %}"> <i class="bi bi-info-circle"></i> Support & documentation</a></li>
            </ul>
          
          
        <button class="toggle-btn" onclick="toggleSidebar()"></button>
            <i class="bi bi-caret-left"></i> <!-- Icône initiale -->
        </button></nav>
        </div>
        </div>
      </div>
      <main class="content">
        {% include 'pp.html' %}
        {% block content %}

        {% endblock %}
      </main>
    </div>
    <script src="{% static 'js/scripts.js' %}"></script>
  </body>
</html>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  window.onpageshow = function (event) {
    if (event.persisted) {
      // Effectue un appel HTTP de type HEAD à la racine du serveur
      fetch('/', {
        method: 'HEAD'
      })
        .then((response) => {
          if (response.status === 200) {
          } else if (response.redirected) {
            // Si le serveur renvoie une redirection, on redirige
            window.location.href = response.url
          } else {
            // Si autre chose que 200 ou redirection, log 'hessoule'
            console.log('Hessoule')
          }
        })
        .catch((error) => {
          console.log('Erreur lors de la requête:', error)
        })
    }
  }
</script>
